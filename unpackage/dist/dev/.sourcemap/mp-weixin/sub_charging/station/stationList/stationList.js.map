{"version":3,"file":"stationList.js","sources":["sub_charging/station/stationList/stationList.vue","C:/Users/localadmin/Downloads/HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniPage:/c3ViX2NoYXJnaW5nXHN0YXRpb25cc3RhdGlvbkxpc3Rcc3RhdGlvbkxpc3QudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"whitePage\">\r\n\t\t<jcode-navbar leftIcon=\"left\" :title=\"title\"></jcode-navbar>\r\n\t\t<zy-search :style=\"'position: fixed;z-index: 10;top: '+navbarHeight+'px;'\" :focus=\"focus\"\r\n\t\t\tinputPlaceholder=\"站名搜索\" :theme=\"themeClass\" @getSearchText=\"getSearchText\"></zy-search>\r\n\r\n\t\t<jcode-scroll style=\"margin-top: 50px;width: 100%;\" ref=\"jcodeScrollRef\" class=\"scroll\"\r\n\t\t\t:scrollHeight=\"mainHeight+'px'\" :queryInfo=\"queryInfo\" @getData=\"getData\" scrollY @backData=\"backData\"\r\n\t\t\temptyText=\"未查到站点\">\r\n\t\t\t<view style=\"display: flex;align-items: center;flex-direction: column;\">\r\n\r\n\t\t\t\t<block v-for=\"(item, index) in stationList\">\r\n\t\t\t\t\t<view class=\"stationcard\" @click=\"navTo(`/sub_charging/station/stationDetail?id=${item.id}`)\">\r\n\t\t\t\t\t\t<view class=\"stationcard-top\">\r\n\t\t\t\t\t\t\t<view style=\"display: flex;    align-items: center;\">\r\n\t\t\t\t\t\t\t\t<block v-if=\"item.isFast==0\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"label label-type1\">\r\n\t\t\t\t\t\t\t\t\t\t快充</view>\r\n\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t<block v-else>\r\n\t\t\t\t\t\t\t\t\t<view class=\"label label-type2\">\r\n\t\t\t\t\t\t\t\t\t\t慢充</view>\r\n\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t<view class=\"stationname\">\r\n\t\t\t\t\t\t\t\t\t{{item.stationName}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t<view style=\"display: flex;align-items: center;\" v-if=\"item.distance\">\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"location\" color=\"gray\" size=\"20\"></uni-icons>\r\n\t\t\t\t\t\t\t\t<view style=\"font-size: 24rpx;color: gray;\">{{numFilter(item.distance,1)}}km\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<view class=\"stationcard-middle\">\r\n\t\t\t\t\t\t\t<view class=\"stationcard-middle-address\">\r\n\t\t\t\t\t\t\t\t24小时 | 对外开放 | {{item.address}}</view>\r\n\t\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t\tstyle=\"display: flex;align-items: center;background-color: #F7F7F7;padding:15rpx 30rpx;margin-top: 20rpx;border-radius: 20rpx;\">\r\n\t\t\t\t\t\t\t\t<image src=\"@/static/images/tj/home/flash2.svg\"\r\n\t\t\t\t\t\t\t\t\tstyle=\"height: 25rpx;margin-right: 20rpx;\" mode=\"heightFix\"></image>\r\n\t\t\t\t\t\t\t\t<view style=\"font-size: 26rpx;font-weight: bold;color: #333333;\">\r\n\t\t\t\t\t\t\t\t\t空闲&nbsp;{{item.freeGunNum}} </view>\r\n\t\t\t\t\t\t\t\t<view style=\"color: #989898;font-size: 22rpx;margin-left: 10rpx;\">\r\n\t\t\t\t\t\t\t\t\t/共&nbsp;{{item.totalGunNum}}</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t\tstyle=\"display: flex;justify-content: space-between;align-items: center;margin-top: 20rpx;\">\r\n\t\t\t\t\t\t\t\t<view class=\"stationcard-middle-fee\">\r\n\t\t\t\t\t\t\t\t\t{{ numFilter(item.currentFee,2)}}<span style=\"font-size: 24rpx;font-weight: 300\">\r\n\t\t\t\t\t\t\t\t\t\t元/度</span>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"stationcard-middle-chargebutton\" @tap.stop=\"toMap(item)\"\r\n\t\t\t\t\t\t\t\t\tstyle=\"justify-content: space-between;\">\r\n\t\t\t\t\t\t\t\t\t<uni-icons type=\"paperplane\" size=\"16\" color=\"white\"></uni-icons>\r\n\t\t\t\t\t\t\t\t\t<view style=\"margin-left: 10rpx;\">导航</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</block>\r\n\t\t\t</view>\r\n\t\t\t<view style=\"height: 10px;\"></view>\r\n\t\t</jcode-scroll>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\tgetCurrentInstance\r\n\t} from \"vue\";\r\n\r\n\timport {\r\n\t\tonLoad,\r\n\t\tonShow,\r\n\t\tonReady\r\n\t} from \"@dcloudio/uni-app\";\r\n\r\n\tconst {\r\n\t\tproxy\r\n\t} = getCurrentInstance();\r\n\r\n\tconst themeClass = ref('circle')\r\n\tconst title = ref('')\r\n\tconst focus = ref(false)\r\n\r\n\tonLoad((option) => {\r\n\t\ttitle.value = option.title\r\n\t\tfocus.value = option.focus == 1 ? true : false\r\n\t\tconsole.log('focus.value', focus.value)\r\n\t})\r\n\r\n\tonShow(async () => {\r\n\r\n\t})\r\n\r\n\tconst mainHeight = ref(0)\r\n\tconst navbarHeight = ref(0)\r\n\tonReady(async () => {\r\n\t\tlet sysInfo = uni.getSystemInfoSync();\r\n\t\tconsole.log('sysInfo', sysInfo)\r\n\t\t//屏幕高度 - 顶部栏高度\r\n\t\tnavbarHeight.value = sysInfo.statusBarHeight + 44\r\n\t\tmainHeight.value = sysInfo.windowHeight - navbarHeight.value - 50;\r\n\t\tconsole.log('mainHeight', mainHeight.value)\r\n\t})\r\n\t\r\n\t//经纬度\r\n\tconst latitude = ref(null)\r\n\tconst longitude = ref(null)\r\n\r\n\tconst jcodeScrollRef = ref();\r\n\tconst stationList = ref([])\r\n\r\n\tconst queryInfo = ref({\r\n\t\tpageNum: 1,\r\n\t\tpageSize: 7\r\n\t})\r\n\tconst navBarBackGroundSign = ref(0)\r\n\r\n\t//调接口获取数据\r\n\tconst getData = async (e) => {\r\n\t\t// var location = await proxy.getLocation()\r\n\t\t// var data = {\r\n\t\t// \tstationName: searchText.value,\r\n\t\t// \t...e,\r\n\t\t// \tlatitude: location?.latitude,\r\n\t\t// \tlongitude: location?.longitude\r\n\t\t// }\r\n\t\t// getNearStationList(data).then(res => {\r\n\t\t// \tjcodeScrollRef.value.backData(res)\r\n\t\t// })\r\n\r\n\t\t//调接口拿站的分页数据\r\n\t\tsimulateData()\r\n\t}\r\n\r\n\t//组件将数据拼接后传回父页面\r\n\tconst backData = (e) => {\r\n\t\tstationList.value = e\r\n\t\tuni.hideLoading()\r\n\t}\r\n\t\r\n\t\r\n\tconst searchText = ref('')\r\n\tasync function getSearchText(e) {\r\n\t\tif (!e) {\r\n\t\t\ttitle.value = '站点列表'\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttitle.value = '搜索结果'\r\n\t\t}\r\n\t\tsearchText.value = e\r\n\t\r\n\t\tsimulateData(searchText.value)\r\n\t}\r\n\t\r\n\tfunction simulateData(e) {\r\n\t\tproxy.showLoading()\r\n\t\tsetTimeout(() => {\r\n\t\t\tproxy.hideLoading()\r\n\t\t\t//分页数据处理  接口返回数据需要这样的格式  totalRow总数   totalPage总页数  list当页数据  \r\n\t\t\tvar sList = {}\r\n\t\t\tif (e) {\r\n\t\t\t\tsList = {\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\ttotalRow: 4,\r\n\t\t\t\t\t\ttotalPage: 1,\r\n\t\t\t\t\t\tlist: [{\r\n\t\t\t\t\t\t\taddress: \"广东省深圳市福田区黄河路黄河大厦地下停车场\",\r\n\t\t\t\t\t\t\tcurrentFee: 1.69,\r\n\t\t\t\t\t\t\tlatitude: 22.5472,\r\n\t\t\t\t\t\t\tlongitude: 114.0445,\r\n\t\t\t\t\t\t\tstationName: \"搜索结果站\",\r\n\t\t\t\t\t\t\ttotalGunNum: 2,\r\n\t\t\t\t\t\t\tfreeGunNum: 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsList = {\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\ttotalRow: 4,\r\n\t\t\t\t\t\ttotalPage: 1,\r\n\t\t\t\t\t\tlist: [{\r\n\t\t\t\t\t\t\taddress: \"广东省深圳市福田区黄河路黄河大厦地下停车场\",\r\n\t\t\t\t\t\t\tcurrentFee: 1.69,\r\n\t\t\t\t\t\t\tlatitude: 22.5472,\r\n\t\t\t\t\t\t\tlongitude: 114.0445,\r\n\t\t\t\t\t\t\tstationName: \"内部测试充电站\",\r\n\t\t\t\t\t\t\ttotalGunNum: 2,\r\n\t\t\t\t\t\t\tfreeGunNum: 1\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\taddress: \"广东省深圳市福田区长江路111号\",\r\n\t\t\t\t\t\t\tcurrentFee: 1.19,\r\n\t\t\t\t\t\t\tlatitude: 21.5472,\r\n\t\t\t\t\t\t\tlongitude: 114.0445,\r\n\t\t\t\t\t\t\tstationName: \"内部测试充电站2\",\r\n\t\t\t\t\t\t\ttotalGunNum: 0,\r\n\t\t\t\t\t\t\tfreeGunNum: 2\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\taddress: \"广东省深圳市福田区长江路112号\",\r\n\t\t\t\t\t\t\tcurrentFee: 1.19,\r\n\t\t\t\t\t\t\tlatitude: 21.6472,\r\n\t\t\t\t\t\t\tlongitude: 114.0445,\r\n\t\t\t\t\t\t\tstationName: \"内部测试充电站3\",\r\n\t\t\t\t\t\t\ttotalGunNum: 1,\r\n\t\t\t\t\t\t\tfreeGunNum: 2\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\taddress: \"广东省深圳市福田区长江路113号\",\r\n\t\t\t\t\t\t\tcurrentFee: 1.19,\r\n\t\t\t\t\t\t\tlatitude: 21.5672,\r\n\t\t\t\t\t\t\tlongitude: 114.0445,\r\n\t\t\t\t\t\t\tstationName: \"内部测试充电站4\",\r\n\t\t\t\t\t\t\ttotalGunNum: 2,\r\n\t\t\t\t\t\t\tfreeGunNum: 2\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tjcodeScrollRef.value.backData(sList)\r\n\t\t}, 1000)\r\n\t}\r\n\t\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.stationcard {\r\n\t\tbackground-color: white;\r\n\t\tmargin: 10rpx 0rpx;\r\n\t\tpadding: 30rpx;\r\n\t\twidth: 95vw;\r\n\t\tborder-radius: 20rpx;\r\n\t\tbox-shadow: 0px 0px 10px 0px rgba(253, 226, 172, 0.3);\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\tflex-direction: column;\r\n\r\n\t\t&-top {\r\n\t\t\twidth: 100%;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: space-between;\r\n\r\n\t\t\t.label {\r\n\t\t\t\tborder-top-right-radius: 20rpx;\r\n\t\t\t\tborder-top-left-radius: 20rpx;\r\n\t\t\t\tborder-bottom-left-radius: 20rpx;\r\n\t\t\t\tpadding: 5rpx 30rpx;\r\n\t\t\t\tcolor: white;\r\n\t\t\t\tfont-size: 28rpx;\r\n\r\n\t\t\t\t&-type1 {\r\n\t\t\t\t\tbackground-image: linear-gradient(120deg, #6FD8B2 30%, #3DBE96 70%);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&-type2 {\r\n\t\t\t\t\tbackground-image: linear-gradient(120deg, #58B1F6 30%, #5598FF 70%);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.stationname {\r\n\t\t\t\tmax-width: 45vw;\r\n\t\t\t\twhite-space: nowrap;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t\tmargin: 0 20rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&-middle {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\r\n\t\t\t&-address {\r\n\t\t\t\tfont-size: 12px;\r\n\t\t\t\tcolor: gray;\r\n\t\t\t\tmargin-top: 10px;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\twhite-space: nowrap;\r\n\t\t\t\twidth: 88%;\r\n\t\t\t\tmargin-left: 10rpx;\r\n\t\t\t}\r\n\r\n\t\t\t&-fee {\r\n\t\t\t\tmargin-left: 10rpx;\r\n\t\t\t\tcolor: $uni-color-theme;\r\n\t\t\t\tfont-size: 45rpx;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t}\r\n\r\n\t\t\t&-chargebutton {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tpadding: 0 20rpx;\r\n\t\t\t\tbackground-color: $uni-color-theme;\r\n\t\t\t\tcolor: white;\r\n\t\t\t\tpadding: 10rpx 30rpx;\r\n\t\t\t\tborder-radius: 20rpx;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n</style>","import MiniProgramPage from 'D:/qcxn/charging-pile-app/sub_charging/station/stationList/stationList.vue'\nwx.createPage(MiniProgramPage)"],"names":["getCurrentInstance","ref","onLoad","uni","onShow","onReady"],"mappings":"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"}