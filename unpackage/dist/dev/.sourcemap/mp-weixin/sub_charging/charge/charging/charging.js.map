{"version":3,"file":"charging.js","sources":["sub_charging/charge/charging/charging.vue","C:/Users/localadmin/Downloads/HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniPage:/c3ViX2NoYXJnaW5nXGNoYXJnZVxjaGFyZ2luZ1xjaGFyZ2luZy52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"whitePage\" style=\"background-color: white;\">\r\n\t\t<jcode-navbar leftIcon=\"left\" title=\"充电中...\" backgroundColor=\"transparent\" background-image=\"\"></jcode-navbar>\r\n\t\t<image class=\"topImg\" :src=\"topImageUrl\" :style=\"{width: '100%',marginTop:-navBarHeight+'px'}\" mode=\"widthFix\">\r\n\t\t</image>\r\n\r\n\t\t<view\r\n\t\t\tstyle=\"width: 95vw;display: grid;grid-template-columns: repeat(3, 1fr);gap: 20rpx;margin-top: 70rpx;font-size: 24rpx;\">\r\n\t\t\t<view\r\n\t\t\t\tstyle=\"background-color: #F7F8F8;border-radius: 20rpx;justify-content: center;align-items: center;display: flex;flex-direction: column;padding: 30rpx;\">\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle=\"font-size: 40rpx;font-weight: bold;color: black;margin-right: 5rpx;\">{{orderInfo.degree}}\r\n\t\t\t\t\t</span>度\r\n\t\t\t\t</view>\r\n\t\t\t\t<view style=\"color: #989898;display: flex;align-items: center;margin-top: 7rpx;\">\r\n\t\t\t\t\t<image src=\"/static/images/charge/item1.svg\" mode=\"heightFix\"\r\n\t\t\t\t\t\tstyle=\"height: 25rpx;margin-right: 7rpx;\"></image>\r\n\t\t\t\t\t已充电量\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view\r\n\t\t\t\tstyle=\"background-color: #F7F8F8;border-radius: 20rpx;justify-content: center;align-items: center;display: flex;flex-direction: column;\">\r\n\t\t\t\t<view style=\"font-size: 24rpx;\">\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle=\"font-size: 40rpx;font-weight: bold;color: black;margin-right: 5rpx;\">{{orderInfo.timeSpend}}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view style=\"color: #989898;display: flex;align-items: center;margin-top: 7rpx;\">\r\n\t\t\t\t\t<image src=\"/static/images/charge/item2.svg\" mode=\"heightFix\"\r\n\t\t\t\t\t\tstyle=\"height: 25rpx;margin-right: 7rpx;\"></image>\r\n\t\t\t\t\t已充时长\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view\r\n\t\t\t\tstyle=\"background-color: #F7F8F8;border-radius: 20rpx;justify-content: center;align-items: center;display: flex;flex-direction: column;\">\r\n\t\t\t\t<view style=\"font-size: 24rpx;\">\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle=\"font-size: 40rpx;font-weight: bold;color: black;margin-right: 5rpx;\">{{orderInfo.orderAmt}}\r\n\t\t\t\t\t</span>元\r\n\t\t\t\t</view>\r\n\t\t\t\t<view style=\"color: #989898;display: flex;align-items: center;margin-top: 7rpx;\">\r\n\t\t\t\t\t<image src=\"/static/images/charge/item3.svg\" mode=\"heightFix\"\r\n\t\t\t\t\t\tstyle=\"height: 25rpx;margin-right: 7rpx;\"></image>\r\n\t\t\t\t\t当前费用\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view\r\n\t\t\tstyle=\"width: 95vw;margin-top: 30rpx;font-size: 24rpx;display: flex;background-color: #F7F8F8;border-radius: 20rpx;padding: 30rpx;justify-content: space-around;\">\r\n\t\t\t<view style=\"display: flex;justify-content: center;align-items: center;flex-direction: column;\">\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle=\"font-size: 40rpx;font-weight: bold;color: black;margin-right: 5rpx;\">{{orderInfo.power}}</span>kw\r\n\t\t\t\t</view>\r\n\t\t\t\t<view style=\"color: #989898;margin-top: 7rpx;\">功率</view>\r\n\t\t\t</view>\r\n\t\t\t<view style=\"display: flex;justify-content: center;align-items: center;flex-direction: column;\">\r\n\t\t\t\t<view><span\r\n\t\t\t\t\t\tstyle=\"font-size: 40rpx;font-weight: bold;color: black;margin-right: 5rpx;\">{{orderInfo.current}}</span>A\r\n\t\t\t\t</view>\r\n\t\t\t\t<view style=\"color: #989898;margin-top: 7rpx;\">电流</view>\r\n\t\t\t</view>\r\n\t\t\t<view style=\"display: flex;justify-content: center;align-items: center;flex-direction: column;\">\r\n\t\t\t\t<view><span\r\n\t\t\t\t\t\tstyle=\"font-size: 40rpx;font-weight: bold;color: black;margin-right: 5rpx;\">{{orderInfo.voltage}}</span>V\r\n\t\t\t\t</view>\r\n\t\t\t\t<view style=\"color: #989898;margin-top: 7rpx;\">电压</view>\r\n\t\t\t</view>\r\n\t\t\t<view style=\"display: flex;justify-content: center;align-items: center;flex-direction: column;\">\r\n\t\t\t\t<view><span\r\n\t\t\t\t\t\tstyle=\"font-size: 40rpx;font-weight: bold;color: black;margin-right: 5rpx;\">{{orderInfo.temperature}}</span>℃\r\n\t\t\t\t</view>\r\n\t\t\t\t<view style=\"color: #989898;margin-top: 7rpx;\">温度</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\r\n\t\t<view class=\"bottom-row\">\r\n\t\t\t<view style=\"display: flex;align-items: baseline;justify-content: space-between;height: 60px\">\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<span style=\"font-size: 30rpx;color: black;margin-left: 20rpx;\">￥</span>\r\n\t\t\t\t\t<span style=\"font-size: 52rpx;font-weight: bold;color: black;\">{{orderInfo.orderAmt}}</span>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view\r\n\t\t\t\t\tstyle=\"width: 200px;height: 42px;background-color: #F76548;color: white;border-radius: 50rpx;align-items: center;justify-content: center;display: flex;\"\r\n\t\t\t\t\t@click=\"noMultipleClicks(stopCharge)\">结束充电</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<jcode-dialog ref=\"dialogRef\" message=\"确定停止当前充电订单吗？\" @buttonBack=\"buttonBack\"></jcode-dialog>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\t// import {\r\n\t// \tgetOrderRealTimeInfo\r\n\t// } from '@/api/api.js'\r\n\r\n\timport {\r\n\t\tref,\r\n\t\tgetCurrentInstance,\r\n\t\tonMounted,\r\n\t\tonUnmounted\r\n\t} from \"vue\";\r\n\r\n\timport {\r\n\t\tonLoad\r\n\t} from \"@dcloudio/uni-app\";\r\n\r\n\tconst {\r\n\t\tproxy\r\n\t} = getCurrentInstance();\r\n\r\n\tconst navBarHeight = ref(uni.getSystemInfoSync().statusBarHeight + 60)\r\n\tconst chargeStatus = ref(false)\r\n\tconst timeStep = ref(2)\r\n\tconst dialogRef = ref();\r\n\tconst orderId = ref('');\r\n\tconst orderInfo = ref({});\r\n\tconst intervalId = ref();//定时器\r\n\r\n\tonLoad((option) => {\r\n\t\tproxy.showLoading()\r\n\t\tconsole.log('option.id', option.id)\r\n\t\torderId.value = option.id\r\n\t\tgetInfo()\r\n\t})\r\n\r\n\tconst topImageUrl = ref('')\r\n\tconst topImages = ref([])\r\n\r\n\tconst getInfo = async () => {\r\n\t\tsetTimeout(() => {\r\n\t\t\tuni.hideLoading()\r\n\t\t\t//此路径下有对应四种策略图片\r\n\t\t\ttopImageUrl.value = '/static/images/charge/charging1.svg'\r\n\t\t\torderInfo.value = {\r\n\t\t\t\tdegree: 1.22,\r\n\t\t\t\ttimeSpend: '20分钟',\r\n\t\t\t\torderAmt: 2.51,\r\n\t\t\t\tpower: 220,\r\n\t\t\t\tcurrent: 5,\r\n\t\t\t\tvoltage: 44,\r\n\t\t\t\ttemperature: 50\r\n\t\t\t}\r\n\t\t}, 1000)\r\n\t}\r\n\r\n\tconst stopCharge = () => {\r\n\t\tdialogRef.value.open()\r\n\t}\r\n\r\n\tconst buttonBack = (e) => {\r\n\t\tdialogRef.value.close()\r\n\t\tif (e == 'right') {\r\n\t\t\tproxy.showLoading(\"订单结束中...\")\r\n\r\n\t\t\t//模拟停止订单接口\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tproxy.redTo(`/sub_charging/order/orderDetails?id=${orderId.value}`)\r\n\t\t\t}, 1000)\r\n\t\t}\r\n\t}\r\n\r\n\tonMounted(() => {\r\n\t\treSetIntervalId()\r\n\t});\r\n\r\n\tonUnmounted(() => {\r\n\t\t// 清除定时器\r\n\t\tif (intervalId.value) {\r\n\t\t\tclearInterval(intervalId.value);\r\n\t\t}\r\n\t});\r\n\r\n\tconst reSetIntervalId = () => {\r\n\t\tif (intervalId.value) {\r\n\t\t\tclearInterval(intervalId.value);\r\n\t\t}\r\n\t\tintervalId.value = setInterval(() => {\r\n\t\t\t//轮询接口获取最新充电订单数据\r\n\t\t\tgetInfo();\r\n\t\t}, timeStep.value * 1000);\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.orderclass {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\r\n\t\t&-top {\r\n\t\t\tdisplay: flex;\r\n\t\t\twidth: 90vw;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\tmargin-top: 50rpx;\r\n\t\t\tfont-size: 26rpx;\r\n\r\n\r\n\t\t\t.item {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tbackground-color: #EDF0F6;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tpadding: 40rpx;\r\n\t\t\t\tborder-radius: 30rpx;\r\n\r\n\t\t\t\t.top {\r\n\t\t\t\t\tfont-size: 36rpx;\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\tcolor: black;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.bottom {\r\n\t\t\t\t\tcolor: gray;\r\n\t\t\t\t\tmargin-top: 10rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&-bottom {\r\n\t\t\tmargin-bottom: 50rpx;\r\n\t\t\twidth: 90vw;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\t\t\tpadding: 40rpx;\r\n\t\t\tbackground-color: white;\r\n\t\t\tbox-shadow: 0px 0px 10px 0px rgba(253, 226, 172, 0.3);\r\n\t\t\tborder-radius: 30rpx;\r\n\t\t\tmargin-top: 50rpx;\r\n\r\n\t\t\t.item {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t.top {\r\n\t\t\t\t\tfont-size: 40rpx;\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\tcolor: black;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.bottom {\r\n\t\t\t\t\tcolor: gray;\r\n\t\t\t\t\tmargin-top: 10rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t.bottom-row {\r\n\t\tz-index: 10;\r\n\t\tposition: fixed;\r\n\t\tbottom: 0px;\r\n\t\tleft: 0;\r\n\t\tbackground-color: #ffffff;\r\n\t\twidth: 100%;\r\n\t\theight: 83px;\r\n\t\tbox-shadow: 0px -2rpx 12rpx 0px rgba(0, 0, 0, 0.1);\r\n\t\t@include padding(10rpx);\r\n\t\tborder-top-left-radius: 20rpx;\r\n\t\tborder-top-right-radius: 20rpx;\r\n\t}\r\n</style>","import MiniProgramPage from 'D:/qcxn/charging-pile-app/sub_charging/charge/charging/charging.vue'\nwx.createPage(MiniProgramPage)"],"names":["getCurrentInstance","ref","uni","onLoad","onMounted","onUnmounted"],"mappings":";;;;;;;;;;;;;;;;AAkHC,UAAM;AAAA,MACL;AAAA,IACA,IAAGA,cAAkB,mBAAA;AAEtB,UAAM,eAAeC,cAAAA,IAAIC,cAAAA,MAAI,kBAAmB,EAAC,kBAAkB,EAAE;AAChDD,kBAAAA,IAAI,KAAK;AAC9B,UAAM,WAAWA,cAAG,IAAC,CAAC;AACtB,UAAM,YAAYA,cAAAA;AAClB,UAAM,UAAUA,kBAAI,EAAE;AACtB,UAAM,YAAYA,kBAAI,CAAA,CAAE;AACxB,UAAM,aAAaA,cAAAA;AAEnBE,kBAAM,OAAC,CAAC,WAAW;AAClB,YAAM,YAAa;AACnBD,oBAAY,MAAA,MAAA,OAAA,oDAAA,aAAa,OAAO,EAAE;AAClC,cAAQ,QAAQ,OAAO;AACvB,cAAS;AAAA,IACX,CAAE;AAED,UAAM,cAAcD,cAAG,IAAC,EAAE;AACRA,kBAAAA,IAAI,CAAA,CAAE;AAExB,UAAM,UAAU,YAAY;AAC3B,iBAAW,MAAM;AAChBC,sBAAAA,MAAI,YAAa;AAEjB,oBAAY,QAAQ;AACpB,kBAAU,QAAQ;AAAA,UACjB,QAAQ;AAAA,UACR,WAAW;AAAA,UACX,UAAU;AAAA,UACV,OAAO;AAAA,UACP,SAAS;AAAA,UACT,SAAS;AAAA,UACT,aAAa;AAAA,QACb;AAAA,MACD,GAAE,GAAI;AAAA,IACP;AAED,UAAM,aAAa,MAAM;AACxB,gBAAU,MAAM,KAAM;AAAA,IACtB;AAED,UAAM,aAAa,CAAC,MAAM;AACzB,gBAAU,MAAM,MAAO;AACvB,UAAI,KAAK,SAAS;AACjB,cAAM,YAAY,UAAU;AAG5B,mBAAW,MAAM;AAChB,gBAAM,MAAM,uCAAuC,QAAQ,KAAK,EAAE;AAAA,QAClE,GAAE,GAAI;AAAA,MACP;AAAA,IACD;AAEDE,kBAAAA,UAAU,MAAM;AACf,sBAAiB;AAAA,IACnB,CAAE;AAEDC,kBAAAA,YAAY,MAAM;AAEjB,UAAI,WAAW,OAAO;AACrB,sBAAc,WAAW,KAAK;AAAA,MAC9B;AAAA,IACH,CAAE;AAED,UAAM,kBAAkB,MAAM;AAC7B,UAAI,WAAW,OAAO;AACrB,sBAAc,WAAW,KAAK;AAAA,MAC9B;AACD,iBAAW,QAAQ,YAAY,MAAM;AAEpC;MACH,GAAK,SAAS,QAAQ,GAAI;AAAA,IACxB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3LF,GAAG,WAAW,eAAe;"}