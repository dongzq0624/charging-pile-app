{"version":3,"file":"mpMixins.js","sources":["uni_modules/rice-swipe-action/components/rice-swipe-action-item/mpMixins.js"],"sourcesContent":["//在微信小程序中，app-vue和app-uvue共用这个mixins\nexport default {\n\t// #ifdef MP-WEIXIN\n\tvirtualHost: true,\n\t// #endif\n\tname: \"riceSwipeActionItem\",\n\tprops: {\n\t\tname: {\n\t\t\ttype: [String, Number],\n\t\t\tdefault: \"\"\n\t\t},\n\t\tleftMenu: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => ([])\n\t\t},\n\t\trightMenu: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => ([])\n\t\t},\n\t\tiosStyle: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tduration: {\n\t\t\ttype: [String, Number],\n\t\t\tdefault: 300\n\t\t},\n\t\tmodelValue: {\n\t\t\ttype: String,\n\t\t\tdefault: \"none\"\n\t\t},\n\t\tautoClose: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tcustomStyle: {\n\t\t\ttype: [Object, String],\n\t\t\tdefault: () => ({})\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tshow: 'none',\n\t\t\topened: false,\n\t\t\tresizeDom: false,\n\t\t}\n\t},\n\twatch: {\n\t\tmodelValue: {\n\t\t\thandler(newVal) {\n\t\t\t\tthis.show = newVal || 'none'\n\t\t\t},\n\t\t\timmediate: true\n\t\t},\n\t},\n\tcomputed: {\n\t\thasLeftAction() {\n\t\t\treturn this.leftMenu.length > 0 || this.$slots.left\n\t\t},\n\t\thasRightAction() {\n\t\t\treturn this.rightMenu.length > 0 || this.$slots.right\n\t\t},\n\t},\n\tmethods: {\n\t\t/**\n\t\t * 重新获取尺寸\n\t\t */\n\t\tresize() {\n\t\t\tthis.resizeDom = true\n\t\t},\n\t\tunresize() {\n\t\t\tthis.resizeDom = false\n\t\t},\n\t\t/**\n\t\t * 获取唯一的id\n\t\t */\n\t\tgetDomId() {\n\t\t\treturn 'id' + String(Math.random()).slice(10)\n\t\t},\n\n\n\n\n\t\t/**\n\t\t * 关闭单元格\n\t\t */\n\t\tclose() {\n\t\t\tif (this.opened) {\n\t\t\t\tthis.opened = false\n\t\t\t\tthis.$emit('close', {\n\t\t\t\t\tname: this.name\n\t\t\t\t})\n\t\t\t}\n\t\t\tthis.$emit('update:modelValue', 'none')\n\t\t\tthis.show = 'none'\n\t\t},\n\n\t\t/**\n\t\t * 打开单元格\n\t\t */\n\t\topen(direction = 'right') {\n\t\t\tthis.closeSwipe()\n\t\t\t//其他值一律按照right处理\n\t\t\tdirection == 'left' ? 'left' : 'right'\n\t\t\tif (this.disabled) return\n\t\t\tif (direction == 'right' && !this.hasRightAction) return\n\t\t\tif (direction == 'left' && !this.hasLeftAction) return\n\t\t\tif (!this.opened) {\n\t\t\t\tthis.opened = true\n\t\t\t\tthis.$emit('open', {\n\t\t\t\t\tdirection,\n\t\t\t\t\tname: this.name\n\t\t\t\t})\n\t\t\t}\n\t\t\tthis.$emit('update:modelValue', direction)\n\t\t\tthis.show = direction\n\t\t},\n\n\t\t/**\n\t\t * 单元格点击\n\t\t */\n\t\tmenuClick(index, direction) {\n\t\t\tif (this.autoClose) {\n\t\t\t\tthis.close()\n\t\t\t}\n\t\t\tthis.$emit('menuClick', {\n\t\t\t\tindex,\n\t\t\t\tdirection,\n\t\t\t\tname: this.name\n\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t * 内容点击\n\t\t */\n\t\tcontentClick() {\n\t\t\tif (this.autoClose) {\n\t\t\t\tthis.close()\n\t\t\t}\n\t\t\tthis.$emit('contentClick', {\n\t\t\t\tname: this.name\n\t\t\t})\n\t\t},\n\n\n\t\t/**\n\t\t * 关闭同组中的其他action\n\t\t */\n\t\tcloseSwipe() {\n\t\t\t//调用父实例的方法\n\t\t\tif (this.swipeaction) {\n\t\t\t\tthis.swipeaction.closeOther(this)\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * 获取父实例\n\t\t */\n\t\tgetSwipeAction() {\n\t\t\tlet parent = this.$parent\n\t\t\tlet parentName = parent.$options.name;\n\t\t\t//1.h5端 view等内置标签是以 Vue 组件方式实现，$parent 会获取这些到内置组件，导致的问题是 this.$parent 与其他平台不一致\n\t\t\t//2.swipe-action组件下的第一级元素可能不是swipe-action-item\n\t\t\twhile (parentName != 'riceSwipeAction') {\n\t\t\t\tparent = parent.$parent\n\t\t\t\tif (!parent) return false\n\t\t\t\tparentName = parent.$options.name;\n\t\t\t}\n\t\t\treturn parent\n\t\t},\n\n\t\t// #ifdef UNI-APP-X\n\n\t\t/**\n\t\t * style-为了兼容app-uvue\n\t\t */\n\t\tgetMenuStyle(style) {\n\t\t\treturn style || {}\n\t\t},\n\n\t\tgetMenuTextStyle() {\n\t\t\treturn {}\n\t\t},\n\n\t\t// #endif\n\n\t\t/**\n\t\t * uninstall\n\t\t */\n\t\tuninstall() {\n\t\t\tif (this.swipeaction) {\n\t\t\t\tthis.swipeaction.children?.forEach((item, index) => {\n\t\t\t\t\tif (item === this) this.swipeaction.children.splice(index, 1)\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t},\n\tcreated() {\n\t\t//swipeaction没有在data中进行定义，不会被 Vue 的响应式系统处理，可以减少不必要的开销\n\t\tthis.swipeaction = this.getSwipeAction()\n\t\tif (this.swipeaction?.children) {\n\t\t\tthis.swipeaction.children.push(this)\n\t\t}\n\t},\n\tunmounted() {\n\t\tthis.uninstall()\n\t}\n}"],"names":[],"mappings":"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"}