{"version":3,"file":"memberSetting.js","sources":["pages/setting/memberSetting.vue","C:/Users/localadmin/Downloads/HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2V0dGluZy9tZW1iZXJTZXR0aW5nLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<jcode-navbar leftIcon=\"left\" title=\"个人中心\"></jcode-navbar>\r\n\t<view class=\"container\">\r\n\t\t<jcode-form ref=\"form\" title=\"个人资料\" :formList=\"list\" @jcodeFormBack=\"jcodeFormBack\"></jcode-form>\r\n\r\n\t\t<jcode-dialog ref=\"changeMobilePopup\" type=\"buttonSlot\" :message=\"'您确认更换当前' + mobile + '的手机号吗？'\">\r\n\t\t\t<view class=\"foot\">\r\n\t\t\t\t<button class=\"btn cancel\" @click=\"getPhoneNumberBack('left')\">取消</button>\r\n\t\t\t\t<!-- getMobile 获取手机号 -->\r\n\t\t\t\t<button class=\"btn confirm\" open-type=\"getPhoneNumber\"\r\n\t\t\t\t\t@getphonenumber=\"getPhoneNumberBack('right',$event)\">确认</button>\r\n\t\t\t</view>\r\n\t\t</jcode-dialog>\r\n\r\n\t\t<view class=\"version\">\r\n\t\t\t<view style=\"width:100rpx;text-align: center;color: gray;font-size: 28rpx;\">{{version}}</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\t// import {\r\n\t// \trequestFile\r\n\t// } from '@/utils/request.js'\r\n\r\n\timport {\r\n\t\tref,\r\n\t\tgetCurrentInstance\r\n\t} from \"vue\";\r\n\r\n\timport {\r\n\t\tonShow\r\n\t} from \"@dcloudio/uni-app\";\r\n\r\n\tconst {\r\n\t\tproxy\r\n\t} = getCurrentInstance();\r\n\r\n\tconst version = ref('');\r\n\tconst changeMobilePopup = ref();\r\n\tconst sendCode = ref();\r\n\tconst mobile = ref('')\r\n\tconst list = ref([{\r\n\t\tid: 0,\r\n\t\ttype: 'weChatAvatar',\r\n\t\ttitle: '头像',\r\n\t\tvalue: \"\",\r\n\t\tright: \"right\"\r\n\t},\r\n\t{\r\n\t\tid: 1,\r\n\t\ttype: 'weChatNickName',\r\n\t\ttitle: '昵称',\r\n\t\tvalue: \"\",\r\n\t\tright: \"right\",\r\n\t},\r\n\t{\r\n\t\tid: 2,\r\n\t\ttype: 'weChatMobile',\r\n\t\ttitle: '绑定手机',\r\n\t\tvalue: \"\",\r\n\t\tright: \"right\",\r\n\t\tcallBack: true\r\n\t}\r\n\t])\r\n\r\n\tonShow(() => {\r\n\t\tif (uni.getStorageSync('member_id'))\r\n\t\t\tinitView()\r\n\t\telse\r\n\t\t\tproxy.toLogin()\r\n\t})\r\n\r\n\tconst initView = () => {\r\n\t\tlist.value[0].value = uni.getStorageSync(\"member_avatar\") || ''\r\n\t\tlist.value[1].value = uni.getStorageSync(\"member_nickName\") || ''\r\n\t\tif (uni.getStorageSync(\"member_mobile\")) {\r\n\t\t\tlist.value[2].value = uni.getStorageSync(\"member_mobile\")\r\n\t\t} else {\r\n\t\t\tlist.value[2].title = \"关联手机\"\r\n\t\t\tlist.value[2].value = \"立即绑定\"\r\n\t\t}\r\n\t\tconsole.log(\"memberInfo\", list.value)\r\n\t}\r\n\r\n\tconst jcodeFormBack = async (e) => {\r\n\t\tconsole.log(\"接收表单传回\", e)\r\n\t\tvar data = {}\r\n\t\tswitch (e.id) {\r\n\t\t\tcase 0:\r\n\t\t\t\t// const img = await requestFile(e.value)\r\n\r\n\t\t\t\t//模拟上传图片 和 调用修改头像接口\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tsaveSuccess()\r\n\t\t\t\t}, 1000)\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\t//模拟调用修改昵称接口\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tsaveSuccess()\r\n\t\t\t\t}, 1000)\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\t//如果是直接绑定,就不需要二次确认\r\n\t\t\t\tif (list.value[2].value.length > 10) {\r\n\t\t\t\t\tchangeMobilePopup.value.open()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlist.value[2].value = e.value\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tconst saveSuccess = () => {\r\n\t\tinitView()\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '操作成功！',\r\n\t\t\ticon: 'none'\r\n\t\t});\r\n\t}\r\n\r\n\t// import {\r\n\t// \tbindMobile,\r\n\t// \tsetStory\r\n\t// } from '@/pages/login/loginMethods.js'\r\n\r\n\t//一键绑定按钮回调\r\n\tconst getPhoneNumberBack = async (button, e) => {\r\n\t\tchangeMobilePopup.value.close()\r\n\t\tif (button == 'right') {\r\n\t\t\tconsole.log('getPhoneNumber点击回调', e) // 动态令牌\r\n\t\t\tif (e.detail.errMsg == 'getPhoneNumber:fail user deny') { //用户点击拒绝\r\n\t\t\t\tproxy.msg('用户拒绝获取手机号')\r\n\t\t\t} else {\r\n\t\t\t\t// e.detail.code 模拟 根据code去后端解密手机号并绑定\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tproxy.successMsg('绑定成功')\r\n\t\t\t\t},1000)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst getVersion = () => {\r\n\t\tconst info = uni.getAccountInfoSync().miniProgram\r\n\t\tswitch (info.envVersion) {\r\n\t\t\tcase 'develop':\r\n\t\t\t\tversion.value = '开发版' + info.version\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'trial':\r\n\t\t\t\tversion.value = '体验版' + info.version\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'release':\r\n\t\t\t\tversion.value = info.version\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tgetVersion()\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t.container {\r\n\t\tbackground-color: #f8f8f8;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tposition: fixed;\r\n\r\n\t\t.version {\r\n\t\t\tposition: fixed;\r\n\t\t\tbottom: 10px;\r\n\t\t\tleft: calc(50% - 50rpx);\r\n\t\t}\r\n\t}\r\n\r\n\t.foot {\r\n\t\t@extend .flex;\r\n\r\n\t\t.btn {\r\n\t\t\tflex: 1;\r\n\t\t\t@include padding(20rpx 0);\r\n\t\t\t@include flexCenter();\r\n\t\t\tborder-radius: 0;\r\n\t\t\tborder-top: 1px solid #cbcbcb70;\r\n\t\t\tfont-weight: bold;\r\n\t\t\theight: 55px;\r\n\r\n\t\t\tfont: {\r\n\t\t\t\tsize: 32rpx\r\n\t\t\t}\r\n\r\n\t\t\t&.cancel {\r\n\t\t\t\tborder-bottom-left-radius: 20rpx;\r\n\t\t\t}\r\n\r\n\t\t\t&.confirm {\r\n\t\t\t\tborder-bottom-right-radius: 20rpx;\r\n\t\t\t\tborder-left: 1px solid #cbcbcb70;\r\n\t\t\t\tcolor: $uni-color-primary;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t::v-deep .my-custom-class {\r\n\t\ttop: 50% !important;\r\n\t\twidth: calc(100% - 60rpx);\r\n\t}\r\n\r\n\tbutton::after {\r\n\t\tborder: none;\r\n\t}\r\n\r\n\tbutton {\r\n\t\tposition: relative;\r\n\t\tdisplay: block;\r\n\t\tmargin-left: auto;\r\n\t\tmargin-right: auto;\r\n\t\tpadding-left: 0px;\r\n\t\tpadding-right: 0px;\r\n\t\tbox-sizing: border-box;\r\n\t\t// font-size: 18px;\r\n\t\ttext-align: center;\r\n\t\ttext-decoration: none;\r\n\t\t// line-height: 1;\r\n\t\tline-height: 1.35;\r\n\t\t// border-radius: 5px;\r\n\t\t-webkit-tap-highlight-color: transparent;\r\n\t\toverflow: hidden;\r\n\t\tcolor: #000000;\r\n\t\tbackground-color: #fff;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n</style>","import MiniProgramPage from 'D:/qcxn/charging-pile-app/pages/setting/memberSetting.vue'\nwx.createPage(MiniProgramPage)"],"names":["getCurrentInstance","ref","onShow","uni"],"mappings":"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"}